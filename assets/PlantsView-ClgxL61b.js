import{u as F,c as h,a as i,h as a,b as t,t as r,j as f,r as V,d as $,m as I,f as M,F as b,e as y,q as N,s as S,g as L,i as g,k as P,n as j}from"./index-zC1LiGRU.js";import{p as q}from"./plant-icon-DCag06KB.js";import{_ as x,B as T}from"./BottomNavLayout-I1hhDxtl.js";const z={class:"modal-box"},A={key:0},E={key:1},O={__name:"DeletePlantModal",props:{plant:{type:Object,required:!0}},emits:["confirm","cancel"],setup(_,{emit:s}){const u=F(),v=_,o=h(()=>u.tasks.filter(m=>m.plantIds.includes(v.plant.id))),d=s;function k(){d("confirm")}function p(){d("cancel")}return(m,c)=>(a(),i("div",{class:"modal-overlay",onClick:f(p,["self"])},[t("div",z,[c[0]||(c[0]=t("h3",null,"Удалить растение?",-1)),t("p",null,[t("strong",null,r(_.plant.name),1)]),c[1]||(c[1]=t("p",null,"Вы уверены, что хотите удалить это растение? Все связанные задачи также будут удалены.",-1)),o.value.length>0?(a(),i("p",A," Будет изменено или удалено "+r(o.value.length)+" задач(а). ",1)):(a(),i("p",E,"Нет связанных задач.")),t("div",{class:"actions"},[t("button",{class:"btn btn-danger",onClick:k},"Удалить"),t("button",{class:"btn btn-cancel",onClick:p},"Отмена")])])]))}},R=x(O,[["__scopeId","data-v-78c9f8fd"]]),G={class:"plants"},H={class:"plant-list"},J=["onClick"],K={class:"plant-image-container"},Q=["src"],U={class:"plant-info"},W=["onClick"],X=["onClick"],Y=["onClick"],Z={__name:"PlantsView",setup(_){const s=F(),u=L(),v=h(()=>s.plants);h(()=>s.favoritePlantIds);const o=V(null);function d(n){u.push(`/plants/edit/${n.id}`)}function k(n){u.push(`/plants/${n.id}`)}function p(n){return s.isFavorite(n)}function m(n){s.toggleFavorite(n)}function c(n){o.value=n}function D(){o.value=null}function w(){o.value&&(s.deletePlant(o.value.id),D())}return(n,l)=>{const B=S("router-link");return a(),i(b,null,[t("div",G,[l[3]||(l[3]=t("header",{class:"plants-header"},[t("h1",null,"Мои растения")],-1)),t("section",H,[(a(!0),i(b,null,y(v.value,e=>(a(),i("div",{key:e.id,class:"plant-card",onClick:C=>k(e)},[t("div",K,[t("img",{src:e.image||g(q),alt:"Растение",class:"plant-image"},null,8,Q)]),t("div",U,[t("h3",null,r(e.name),1),t("p",null,[l[0]||(l[0]=t("strong",null,"Форма:",-1)),P(" "+r(g(s).getFormLabel(e.form)),1)]),t("p",null,[l[1]||(l[1]=t("strong",null,"Посажено:",-1)),P(" "+r(g(s).formatDate(e.plantedDate)),1)])]),t("button",{class:j(["favorite-btn",{active:p(e.id)}]),onClick:f(C=>m(e.id),["stop"])}," ❤ ",10,W),t("button",{class:"delete-btn",onClick:f(C=>c(e),["stop"])}," ❌ ",8,X),t("button",{class:"edit-button",onClick:f(C=>d(e),["stop"])}," ✏️ ",8,Y)],8,J))),128)),o.value?(a(),I(R,{key:0,plant:o.value,onConfirm:w,onCancel:D},null,8,["plant"])):M("",!0)]),$(B,{to:"/plants/new",class:"btn-add"},{default:N(()=>[(a(),i(b,null,y(8,e=>t("div",{key:e,class:"petal"})),64)),l[2]||(l[2]=t("div",{class:"center"},[t("span",{class:"plus-icon"},"+")],-1))]),_:1})]),$(T)],64)}}},st=x(Z,[["__scopeId","data-v-dfbec07f"]]);export{st as default};
