import{_ as C,B as L}from"./BottomNavLayout-I1hhDxtl.js";import{u as O,r as f,o as $,a as r,b as o,d as B,t as n,F as y,e as R,k as T,g as V,h as c}from"./index-zC1LiGRU.js";const J={class:"more"},A={key:0,class:"loading"},F={key:1,class:"error"},U={key:2,class:"forecast-list"},W=["onClick"],z={class:"top-row"},G={class:"date"},K={class:"temp"},Y={class:"emoji weather"},q={class:"middle-row"},H={class:"detail wind"},Q={class:"detail precipitation"},X={class:"moon-row"},Z={class:"moon-emoji"},ee={class:"moon-phase"},te={class:"backup-data"},oe={class:"btn-import"},ae="my-pwa-app-data",se={__name:"MoreView",setup(ne){const l=O();V();const d=f(!0),m=f(null),h=f([]);$(async()=>{if(!navigator.geolocation){m.value="–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º.",d.value=!1;return}navigator.geolocation.getCurrentPosition(async a=>{const e=a.coords.latitude,t=a.coords.longitude;try{const i=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&daily=temperature_2m_max,precipitation_sum,windspeed_10m_max,winddirection_10m_dominant&timezone=auto&windspeed_unit=ms`)).json(),p=[{emoji:"üåë",name:"–ù–æ–≤–æ–ª—É–Ω–∏–µ"},{emoji:"üåí",name:"–†–∞—Å—Ç—É—â–∏–π —Å–µ—Ä–ø"},{emoji:"üåì",name:"–ü–µ—Ä–≤–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å"},{emoji:"üåî",name:"–†–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞"},{emoji:"üåï",name:"–ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ"},{emoji:"üåñ",name:"–£–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞"},{emoji:"üåó",name:"–¢—Ä–µ—Ç—å—è —á–µ—Ç–≤–µ—Ä—Ç—å"},{emoji:"üåò",name:"–£–±—ã–≤–∞—é—â–∏–π —Å–µ—Ä–ø"}];h.value=i.daily.time.map((_,u)=>{const v=Math.round(i.daily.temperature_2m_max[u]),w=Math.round(i.daily.precipitation_sum[u]*10)/10,E=new Date,M=new Date(2e3,0,6),N=(E.getTime()-M.getTime())/(1e3*60*60*24),g=29.53,I=Math.floor(N%g/(g/8)),j=p[I]||p[0],P=k(v,w);return{dateLocale:b(_),temperature:v,precipitation:w,wind_speed:Math.round(i.daily.windspeed_10m_max[u]),wind_dir:D(i.daily.winddirection_10m_dominant[u]),weatherEmoji:P,moonEmoji:j.emoji,moonPhase:j.name}}),d.value=!1}catch(s){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞:",s),m.value="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã.",d.value=!1}},()=>{m.value="–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.",d.value=!1})});function k(a,e){return e>0?"üåß":a>=25?"‚òÄÔ∏è":a>=15?"üå§":a>=5?"‚òÅÔ∏è":"‚ùÑÔ∏è"}function D(a){return["–°","–°–í","–í","–Æ–í","–Æ","–Æ–ó","–ó","–°–ó"][Math.round(a/45)%8]||"‚Äî"}function b(a){const e=new Date(a),t=["–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ","–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫","–í—Ç–æ—Ä–Ω–∏–∫","–°—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä–≥","–ü—è—Ç–Ω–∏—Ü–∞","–°—É–±–±–æ—Ç–∞"],s=["—è–Ω–≤–∞—Ä—è","—Ñ–µ–≤—Ä–∞–ª—è","–º–∞—Ä—Ç–∞","–∞–ø—Ä–µ–ª—è","–º–∞—è","–∏—é–Ω—è","–∏—é–ª—è","–∞–≤–≥—É—Å—Ç–∞","—Å–µ–Ω—Ç—è–±—Ä—è","–æ–∫—Ç—è–±—Ä—è","–Ω–æ—è–±—Ä—è","–¥–µ–∫–∞–±—Ä—è"],i=t[e.getDay()],p=e.getDate(),_=s[e.getMonth()];return`${i}, ${p} ${_}`}function x(){const a={plants:l.plants,tasks:l.tasks,favoritePlantIds:l.favoritePlantIds,timestamp:new Date().toISOString()},e=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="—Å–∞–¥–æ–≤–æ–¥-backup.json",t.click()}async function S(a){const e=a.target.files[0];if(!e)return;const t=new FileReader;t.onload=()=>{try{const s=JSON.parse(t.result);l.$patch({plants:s.plants||[],tasks:s.tasks||[],favoritePlantIds:s.favoritePlantIds||[]}),localStorage.setItem(ae,JSON.stringify(l.state)),alert("–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")}catch(s){alert("–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON. –û—à–∏–±–∫–∞: "+s.error)}},t.readAsText(e)}return(a,e)=>(c(),r(y,null,[o("div",J,[e[1]||(e[1]=o("header",{class:"more-header"},[o("h1",null,"–ï—â–µ")],-1)),e[2]||(e[2]=o("h2",null,"–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ 7 –¥–Ω–µ–π",-1)),d.value?(c(),r("div",A,"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ...")):m.value?(c(),r("div",F,n(m.value),1)):(c(),r("div",U,[(c(!0),r(y,null,R(h.value,(t,s)=>(c(),r("div",{key:s,class:"forecast-item",onClick:i=>a.openDetails(t)},[o("div",z,[o("span",G,n(t.dateLocale),1),o("span",K,n(t.temperature)+"¬∞C",1),o("span",Y,n(t.weatherEmoji),1)]),o("div",q,[o("span",H,n(t.wind_speed)+" –º/—Å "+n(t.wind_dir),1),o("span",Q,n(t.precipitation>0?"–û–±—ä–µ–º –æ—Å–∞–¥–∫–æ–≤: "+t.precipitation+"–º–º":""),1)]),o("div",X,[o("span",Z,n(t.moonEmoji),1),o("span",ee,n(t.moonPhase),1)])],8,W))),128))])),e[3]||(e[3]=o("h2",null," –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç ",-1)),o("div",te,[o("button",{onClick:x,class:"btn-export"},"üì• –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ"),o("label",oe,[e[0]||(e[0]=T(" üì§ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ ")),o("input",{type:"file",accept:".json",onChange:S,hidden:""},null,32)])])]),B(L)],64))}},de=C(se,[["__scopeId","data-v-2ddea694"]]);export{de as default};
