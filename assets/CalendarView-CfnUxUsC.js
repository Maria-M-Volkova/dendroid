import{u as J,r as k,c as f,a as l,b as s,d as K,w as _,v as g,F as v,e as m,t as r,f as Q,j as V,k as T,l as W,g as X,h as u,n as j}from"./index-CSd_dcJo.js";import{_ as Z,B as ee}from"./BottomNavLayout-BYUvNtd8.js";/* empty css                                                                        */const te={class:"calendar"},se={class:"calendar-header"},ae=["value"],ne={class:"moon-phase"},oe={class:"weekdays"},le={class:"dates"},ue=["onClick"],ie={class:"tasks"},re={class:"upcoming-tasks"},de={key:0,class:"no-tasks"},ce={key:1,class:"task-list"},ve=["onClick"],me={class:"task-icon"},pe=["src"],fe={class:"task-info"},De={class:"task-title"},he={class:"task-meta"},ke={class:"task-date"},_e=["onClick"],ye={key:0,class:"modal"},we={class:"modal-content"},ge=["value"],Te=["value"],be={__name:"CalendarView",setup(Me){const D=J(),Y=X(),h=new Date,c=k(h.getFullYear()),i=k(h.getMonth()),$=["Ð¯Ð½Ð²Ð°Ñ€ÑŒ","Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ","ÐœÐ°Ñ€Ñ‚","ÐÐ¿Ñ€ÐµÐ»ÑŒ","ÐœÐ°Ð¹","Ð˜ÑŽÐ½ÑŒ","Ð˜ÑŽÐ»ÑŒ","ÐÐ²Ð³ÑƒÑÑ‚","Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ","ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ","ÐÐ¾ÑÐ±Ñ€ÑŒ","Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ"],I=["ÐŸÐ½","Ð’Ñ‚","Ð¡Ñ€","Ð§Ñ‚","ÐŸÑ‚","Ð¡Ð±","Ð’Ñ"];function L(){i.value===0?(c.value--,i.value=11):i.value--}function U(){i.value===11?(c.value++,i.value=0):i.value++}const b=f(()=>D.icons);function x(a){const t=b.value.find(e=>e.name===a);return t?t.src:""}const F=f(()=>D.plants),B=f(()=>Array.from({length:11},(e,n)=>2020+n)),N=f(()=>{const a=new Date(c.value,i.value+1,0).getDate(),t=new Date(c.value,i.value,1).getDay(),e=[],n=t===0?6:t-1;for(let o=0;o<n;o++)e.push({day:"",isToday:!1,hasTask:!1});for(let o=1;o<=a;o++){const p=`${c.value}-${String(i.value+1).padStart(2,"0")}-${String(o).padStart(2,"0")}`,w=o===h.getDate()&&i.value===h.getMonth()&&c.value===h.getFullYear(),H=D.tasks.filter(G=>G.dueDate===p);e.push({day:o,date:p,isToday:w,hasTask:H.length>0})}return e}),M=f(()=>{const a=new Date,t=new Date(2e3,0,6),n=(a.getTime()-t.getTime())/(1e3*60*60*24),o=29.53,p=Math.floor(n%o/(o/8)),w=[{emoji:"ðŸŒ‘",name:"ÐÐ¾Ð²Ð¾Ð»ÑƒÐ½Ð¸Ðµ"},{emoji:"ðŸŒ’",name:"Ð Ð°ÑÑ‚ÑƒÑ‰Ð¸Ð¹ ÑÐµÑ€Ð¿"},{emoji:"ðŸŒ“",name:"ÐŸÐµÑ€Ð²Ð°Ñ Ñ‡ÐµÑ‚Ð²ÐµÑ€Ñ‚ÑŒ"},{emoji:"ðŸŒ”",name:"Ð Ð°ÑÑ‚ÑƒÑ‰Ð°Ñ Ð»ÑƒÐ½Ð°"},{emoji:"ðŸŒ•",name:"ÐŸÐ¾Ð»Ð½Ð¾Ð»ÑƒÐ½Ð¸Ðµ"},{emoji:"ðŸŒ–",name:"Ð£Ð±Ñ‹Ð²Ð°ÑŽÑ‰Ð°Ñ Ð»ÑƒÐ½Ð°"},{emoji:"ðŸŒ—",name:"Ð¢Ñ€ÐµÑ‚ÑŒÑ Ñ‡ÐµÑ‚Ð²ÐµÑ€Ñ‚ÑŒ"},{emoji:"ðŸŒ˜",name:"Ð£Ð±Ñ‹Ð²Ð°ÑŽÑ‰Ð¸Ð¹ ÑÐµÑ€Ð¿"}];return w[p]||w[0]});new Date().setHours(0,0,0,0);const S=f(()=>{const a=new Date;return[...D.tasks].filter(t=>t.dueDate).map(t=>{const e=new Date(t.dueDate),n=Math.ceil((e-a)/(1e3*60*60*24));let o,p=new Date(t.dueDate).toLocaleString("ru-RU",{dateStyle:"short"});return n<0?o=`ÐŸÑ€Ð¾ÑÑ€Ð¾Ñ‡ÐµÐ½Ð¾ Ð½Ð° ${Math.abs(n)} Ð´Ð½.`:n===0?o="Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ":n<=1?o="Ð—Ð°Ð²Ñ‚Ñ€Ð°":n<=7?o=`${n} Ð´Ð½. Ð¾ÑÑ‚Ð°Ð»Ð¾ÑÑŒ`:o=t.dueDate.toLocaleString("ru-RU",{dateStyle:"short"}),{...t,timeToDue:o,dateLocale:p}}).sort((t,e)=>new Date(t.dueDate)-new Date(e.dueDate)).slice(0,5)});function A(a){Y.push(`/tasks/edit/${a.id}`)}function R(a){return new Date(a.dueDate)<new Date}function O(a){const t=Math.ceil((new Date(a.dueDate)-new Date)/864e5);return t<=3&&t>=0}const y=k(null),d=k({id:null,title:"",icon:"watering",dueDate:"",plantIds:[]});function P(a){y.value=a,d.value={id:null,title:"",icon:"watering",dueDate:a.date,plantIds:[]}}function C(){y.value=null}function q(){d.value.title.trim()&&(d.value.id=Date.now(),D.addTask({...d.value}),C())}const z=k(null);function E(a){z.value=a}return(a,t)=>(u(),l(v,null,[s("div",te,[t[5]||(t[5]=s("h2",null,"ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ",-1)),s("header",se,[s("button",{onClick:L},"â®"),_(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),class:"year-select"},[(u(!0),l(v,null,m(B.value,e=>(u(),l("option",{key:e},r(e),1))),128))],512),[[g,c.value]]),_(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),class:"month-select"},[(u(),l(v,null,m($,(e,n)=>s("option",{key:n,value:n},r(e),9,ae)),64))],512),[[g,i.value]]),s("button",{onClick:U},"â¯")]),s("section",ne,[s("p",null,"Ð¤Ð°Ð·Ð° Ð»ÑƒÐ½Ñ‹: "+r(M.value.emoji)+" "+r(M.value.name),1)]),s("section",oe,[(u(),l(v,null,m(I,e=>s("span",{key:e},r(e),1)),64))]),s("section",le,[(u(!0),l(v,null,m(N.value,e=>(u(),l("span",{key:e.date,class:j({today:e.isToday,"has-task":e.hasTask}),onClick:n=>P(e)},r(e.day),11,ue))),128))])]),s("div",ie,[s("section",re,[t[6]||(t[6]=s("h3",null,"ÐŸÑ€Ð¾ÑˆÐµÐ´ÑˆÐ¸Ðµ Ð¸ Ð±ÑƒÐ´ÑƒÑ‰Ð¸Ðµ Ð‘Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐ¸Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸",-1)),t[7]||(t[7]=s("br",null,null,-1)),S.value.length===0?(u(),l("div",de,' ÐÐµÑ‚ Ð·Ð°Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ñ… Ð·Ð°Ð´Ð°Ñ‡. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» "Ð Ð°ÑÑ‚ÐµÐ½Ð¸Ñ", Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ. ')):(u(),l("ul",ce,[(u(!0),l(v,null,m(S.value,e=>(u(),l("li",{key:e.id,class:"task-card",onClick:n=>A(e)},[s("div",me,[s("img",{src:x(e.icon),width:"20"},null,8,pe)]),s("div",fe,[s("div",De,r(e.title),1),s("div",he,[s("span",{class:j(["time",{overdue:R(e),soon:O(e)}])},r(e.timeToDue),3),s("span",ke,r(e.dateLocale),1)]),s("button",{class:"delete-btn",onClick:V(n=>E(e),["stop"]),title:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ"}," ðŸ—‘ ",8,_e)])],8,ve))),128))]))]),y.value?(u(),l("div",ye,[s("div",we,[s("h3",null,"Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð½Ð° "+r(y.value.date),1),s("form",{onSubmit:V(q,["prevent"])},[s("label",null,[t[8]||(t[8]=T("ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ: ")),_(s("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>d.value.title=e),required:""},null,512),[[W,d.value.title]])]),s("label",null,[t[9]||(t[9]=T("Ð˜ÐºÐ¾Ð½ÐºÐ°: ")),_(s("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>d.value.icon=e)},[(u(!0),l(v,null,m(b.value,e=>(u(),l("option",{key:e.name,value:e.name},r(e.label),9,ge))),128))],512),[[g,d.value.icon]])]),s("label",null,[t[10]||(t[10]=T("ÐŸÑ€Ð¸Ð²ÑÐ·Ð°Ñ‚ÑŒ Ðº Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸ÑŽ: ")),_(s("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>d.value.plantIds=e),multiple:""},[(u(!0),l(v,null,m(F.value,e=>(u(),l("option",{key:e.id,value:e.id},r(e.name),9,Te))),128))],512),[[g,d.value.plantIds]])]),t[11]||(t[11]=s("button",{type:"submit"},"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",-1)),s("button",{type:"button",onClick:C},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ")],32)])])):Q("",!0)]),K(ee)],64))}},Ye=Z(be,[["__scopeId","data-v-c6d02b69"]]);export{Ye as default};
