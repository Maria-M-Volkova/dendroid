import{u as B,s as I,r as M,c as b,o as N,g as S,a as o,b as t,d as C,j as E,w as n,f as F,k as u,l as d,x as k,v as y,F as r,e as f,h as s,t as V}from"./index-DnMfoRfp.js";import{B as L}from"./BottomNavLayout-BNa34VvJ.js";const R={class:"task-edit"},j={class:"plant-select"},A=["value"],P=["value"],H={__name:"TaskEditView",setup(q){const x=I(),v=S(),i=B(),D=parseInt(x.params.id,10),a=M({id:null,title:"",description:"",startDate:"",dueDate:"",repeatable:!1,repeatType:"daily",icon:"watering",plantIds:[]}),T=b(()=>i.plants),U=b(()=>i.icons);N(()=>{const p=i.tasks.find(e=>e.id===D);p?a.value={...p}:v.push("/plants")});function g(){i.updateTask(a.value),m()}function m(){v.back()}return(p,e)=>(s(),o(r,null,[t("div",R,[e[17]||(e[17]=t("h2",null,"Редактирование задачи",-1)),t("form",{onSubmit:E(g,["prevent"])},[t("label",null,[e[8]||(e[8]=u("Название ")),n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.title=l)},null,512),[[d,a.value.title]])]),t("label",null,[e[9]||(e[9]=u("Описание ")),n(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.description=l)},null,512),[[d,a.value.description]])]),t("label",null,[e[10]||(e[10]=u("Дата начала ")),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.startDate=l),type:"date"},null,512),[[d,a.value.startDate]])]),t("label",null,[e[11]||(e[11]=u("Дата окончания ")),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.dueDate=l),type:"date"},null,512),[[d,a.value.dueDate]])]),t("label",null,[n(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=l=>a.value.repeatable=l)},null,512),[[k,a.value.repeatable]]),e[12]||(e[12]=u(" Повторяется"))]),a.value.repeatable?n((s(),o("select",{key:0,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.repeatType=l)},e[13]||(e[13]=[t("option",{value:"daily"},"Ежедневно",-1),t("option",{value:"weekly"},"Еженедельно",-1),t("option",{value:"monthly"},"Ежемесячно",-1)]),512)),[[y,a.value.repeatType]]):F("",!0),e[14]||(e[14]=t("label",null,"Привязанные растения",-1)),t("div",j,[(s(!0),o(r,null,f(T.value,l=>(s(),o("label",{key:l.id},[n(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=w=>a.value.plantIds=w),value:l.id},null,8,A),[[k,a.value.plantIds]]),u(" "+V(l.name),1)]))),128))]),e[15]||(e[15]=t("label",null,"Иконка задачи",-1)),n(t("select",{"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.icon=l)},[(s(!0),o(r,null,f(U.value,l=>(s(),o("option",{key:l.name,value:l.name},V(l.label),9,P))),128))],512),[[y,a.value.icon]]),e[16]||(e[16]=t("button",{type:"submit"},"Сохранить",-1)),t("button",{type:"button",onClick:m},"Отмена")],32)]),C(L)],64))}};export{H as default};
