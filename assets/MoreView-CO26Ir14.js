import{_ as I,B as L}from"./BottomNavLayout-XLNUrmul.js";import{u as $,r as h,o as B,a as r,b as o,d as O,t as a,F as k,e as V,k as R,g as T,h as c}from"./index-CgWZqRK2.js";const F={class:"more"},J={key:0,class:"loading"},A={key:1,class:"error"},U={key:2,class:"forecast-list"},W=["onClick"],z={class:"top-row"},q={class:"date"},G={class:"temp"},H={class:"emoji weather"},K={class:"middle-row"},Q={class:"detail wind"},X={class:"detail precipitation"},Y={class:"moon-row"},Z={class:"moon-emoji"},ee={class:"moon-phase"},te={class:"backup-data"},oe={class:"btn-import"},ne={__name:"MoreView",setup(se){const m=$();T();const l=h(!0),d=h(null),f=h([]);B(async()=>{if(!navigator.geolocation){d.value="–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º.",l.value=!1;return}navigator.geolocation.getCurrentPosition(async n=>{const e=n.coords.latitude,t=n.coords.longitude;try{const i=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${e}&longitude=${t}&daily=temperature_2m_max,precipitation_sum,windspeed_10m_max,winddirection_10m_dominant&timezone=auto&windspeed_unit=ms`)).json(),p=[{emoji:"üåë",name:"–ù–æ–≤–æ–ª—É–Ω–∏–µ"},{emoji:"üåí",name:"–†–∞—Å—Ç—É—â–∏–π —Å–µ—Ä–ø"},{emoji:"üåì",name:"–ü–µ—Ä–≤–∞—è —á–µ—Ç–≤–µ—Ä—Ç—å"},{emoji:"üåî",name:"–†–∞—Å—Ç—É—â–∞—è –ª—É–Ω–∞"},{emoji:"üåï",name:"–ü–æ–ª–Ω–æ–ª—É–Ω–∏–µ"},{emoji:"üåñ",name:"–£–±—ã–≤–∞—é—â–∞—è –ª—É–Ω–∞"},{emoji:"üåó",name:"–¢—Ä–µ—Ç—å—è —á–µ—Ç–≤–µ—Ä—Ç—å"},{emoji:"üåò",name:"–£–±—ã–≤–∞—é—â–∏–π —Å–µ—Ä–ø"}];f.value=i.daily.time.map((_,u)=>{const v=Math.round(i.daily.temperature_2m_max[u]),w=Math.round(i.daily.precipitation_sum[u]*10)/10,E=new Date,N=new Date(2e3,0,6),P=(E.getTime()-N.getTime())/(1e3*60*60*24),g=29.53,S=Math.floor(P%g/(g/8)),j=p[S]||p[0],C=y(v,w);return{dateLocale:b(_),temperature:v,precipitation:w,wind_speed:Math.round(i.daily.windspeed_10m_max[u]),wind_dir:D(i.daily.winddirection_10m_dominant[u]),weatherEmoji:C,moonEmoji:j.emoji,moonPhase:j.name}}),l.value=!1}catch(s){console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞:",s),d.value="–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã.",l.value=!1}},()=>{d.value="–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.",l.value=!1})});function y(n,e){return e>0?"üåß":n>=25?"‚òÄÔ∏è":n>=15?"üå§":n>=5?"‚òÅÔ∏è":"‚ùÑÔ∏è"}function D(n){return["–°","–°–í","–í","–Æ–í","–Æ","–Æ–ó","–ó","–°–ó"][Math.round(n/45)%8]||"‚Äî"}function b(n){const e=new Date(n),t=["–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ","–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫","–í—Ç–æ—Ä–Ω–∏–∫","–°—Ä–µ–¥–∞","–ß–µ—Ç–≤–µ—Ä–≥","–ü—è—Ç–Ω–∏—Ü–∞","–°—É–±–±–æ—Ç–∞"],s=["—è–Ω–≤–∞—Ä—è","—Ñ–µ–≤—Ä–∞–ª—è","–º–∞—Ä—Ç–∞","–∞–ø—Ä–µ–ª—è","–º–∞—è","–∏—é–Ω—è","–∏—é–ª—è","–∞–≤–≥—É—Å—Ç–∞","—Å–µ–Ω—Ç—è–±—Ä—è","–æ–∫—Ç—è–±—Ä—è","–Ω–æ—è–±—Ä—è","–¥–µ–∫–∞–±—Ä—è"],i=t[e.getDay()],p=e.getDate(),_=s[e.getMonth()];return`${i}, ${p} ${_}`}function x(){const n={plants:m.plants,tasks:m.tasks,favoritePlantIds:m.favoritePlantIds,timestamp:new Date().toISOString()},e=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="—Å–∞–¥–æ–≤–æ–¥-backup.json",t.click()}async function M(n){const e=n.target.files[0];if(!e)return;const t=new FileReader;t.onload=()=>{try{const s=JSON.parse(t.result);m.$patch({plants:s.plants||[],tasks:s.tasks||[],favoritePlantIds:s.favoritePlantIds||[]}),alert("–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!")}catch{alert("–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON.")}},t.readAsText(e)}return(n,e)=>(c(),r(k,null,[o("div",F,[e[1]||(e[1]=o("header",{class:"more-header"},[o("h1",null,"–ï—â–µ")],-1)),e[2]||(e[2]=o("h2",null,"–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –Ω–∞ 7 –¥–Ω–µ–π",-1)),l.value?(c(),r("div",J,"–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ...")):d.value?(c(),r("div",A,a(d.value),1)):(c(),r("div",U,[(c(!0),r(k,null,V(f.value,(t,s)=>(c(),r("div",{key:s,class:"forecast-item",onClick:i=>n.openDetails(t)},[o("div",z,[o("span",q,a(t.dateLocale),1),o("span",G,a(t.temperature)+"¬∞C",1),o("span",H,a(t.weatherEmoji),1)]),o("div",K,[o("span",Q,a(t.wind_speed)+" –º/—Å "+a(t.wind_dir),1),o("span",X,a(t.precipitation>0?"–û–±—ä–µ–º –æ—Å–∞–¥–∫–æ–≤: "+t.precipitation+"–º–º":""),1)]),o("div",Y,[o("span",Z,a(t.moonEmoji),1),o("span",ee,a(t.moonPhase),1)])],8,W))),128))])),e[3]||(e[3]=o("h2",null," –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç ",-1)),o("div",te,[o("button",{onClick:x,class:"btn-export"},"üì• –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ"),o("label",oe,[e[0]||(e[0]=R(" üì§ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ ")),o("input",{type:"file",accept:".json",onChange:M,hidden:""},null,32)])])]),O(L)],64))}},le=I(ne,[["__scopeId","data-v-32738c52"]]);export{le as default};
