import{u as k,r as p,o as D,x as w,a as U,b as t,d as F,t as v,j as c,w as n,l as u,v as m,i as B,k as N,n as C,F as P,g as S,h as q}from"./index-CSd_dcJo.js";import{_ as E,B as I}from"./BottomNavLayout-BYUvNtd8.js";import{p as M}from"./plant-icon-DCag06KB.js";const R={class:"plant-edit"},A={class:"edit-header"},L={class:"image-upload"},T=["src"],j={class:"favorite-toggle"},z=["checked"],$={class:"form-actions"},G={type:"submit"},H={__name:"PlantEditView",setup(J){const s=k(),f=S(),g=w(),o=p({id:null,name:"",form:"seed",type:"pot",description:"",plantedDate:"",notes:"",image:""}),i=p(!1);D(()=>{const l=parseInt(g.params.id,10);if(!isNaN(l)){const e=s.plants.find(a=>a.id===l);e&&(o.value={...e},i.value=!0)}});function b(l){const e=l.target.files[0];if(!e)return;const a=new FileReader;a.onload=V=>{o.value.image=V.target.result},a.readAsDataURL(e)}function y(){i.value?s.updatePlant(o.value):(o.value.id=Date.now(),s.addPlant(o.value)),d()}function d(){f.push("/plants")}function r(l){return s.isFavorite(l)}function x(l){s.toggleFavorite(l)}return(l,e)=>(q(),U(P,null,[t("div",R,[t("header",A,[t("button",{class:"back-btn",onClick:d},"←"),t("h1",null,v(i.value?"Редактирование растения":"Добавление нового растения"),1)]),t("form",{onSubmit:c(y,["prevent"]),class:"edit-form"},[e[11]||(e[11]=t("label",{for:"name"},"Название",-1)),n(t("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name=a),required:""},null,512),[[u,o.value.name]]),e[12]||(e[12]=t("label",{for:"form"},"Форма",-1)),n(t("select",{id:"form","onUpdate:modelValue":e[1]||(e[1]=a=>o.value.form=a),required:""},e[7]||(e[7]=[t("option",{value:"seed"},"Семя",-1),t("option",{value:"seedling"},"Рассада",-1),t("option",{value:"adult"},"Взрослое растение",-1)]),512),[[m,o.value.form]]),e[13]||(e[13]=t("label",{for:"type"},"Тип посадки",-1)),n(t("select",{id:"type","onUpdate:modelValue":e[2]||(e[2]=a=>o.value.type=a),required:""},e[8]||(e[8]=[t("option",{value:"pot"},"Горшок",-1),t("option",{value:"ground"},"Грунт",-1),t("option",{value:"hydroponic"},"Гидропоника",-1)]),512),[[m,o.value.type]]),e[14]||(e[14]=t("label",{for:"description"},"Описание",-1)),n(t("textarea",{id:"description","onUpdate:modelValue":e[3]||(e[3]=a=>o.value.description=a)},null,512),[[u,o.value.description]]),e[15]||(e[15]=t("label",{for:"plantedDate"},"Дата посадки",-1)),n(t("input",{type:"date",id:"plantedDate","onUpdate:modelValue":e[4]||(e[4]=a=>o.value.plantedDate=a),required:""},null,512),[[u,o.value.plantedDate]]),e[16]||(e[16]=t("label",{for:"notes"},"Заметки",-1)),n(t("textarea",{id:"notes","onUpdate:modelValue":e[5]||(e[5]=a=>o.value.notes=a)},null,512),[[u,o.value.notes]]),t("div",L,[t("img",{src:o.value.image||B(M),alt:"Растение",class:"preview-image"},null,8,T),t("input",{type:"file",accept:"image/*",capture:"environment",onChange:b},null,32),e[9]||(e[9]=t("p",null,"Выберите изображение или сделайте фото",-1))]),t("label",j,[t("input",{type:"checkbox",checked:r(o.value.id),onChange:e[6]||(e[6]=a=>x(o.value.id))},null,40,z),t("span",{class:C(["heart",{active:r(o.value.id)}])},"❤",2),e[10]||(e[10]=N(" Добавить в избранное "))]),t("div",$,[t("button",G,v(i.value?"Сохранить":"Добавить"),1),t("button",{type:"button",onClick:d},"Отмена")])],32)]),F(I)],64))}},W=E(H,[["__scopeId","data-v-e72bb1c0"]]);export{W as default};
